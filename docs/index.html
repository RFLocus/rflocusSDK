<!DOCTYPE html>
<html class="no-js">
<head>
    <meta name="viewport" content="width=device-width, initial-scale=1" charset="UTF-8">
    <title>R3HandyEngine</title>
    <link href="images/logo-icon.svg" rel="icon" type="image/svg">
    <script>var pathToRoot = "";</script>
    <script>document.documentElement.classList.replace("no-js","js");</script>
    <script>const storage = localStorage.getItem("dokka-dark-mode")
    if (storage == null) {
        const osDarkSchemePreferred = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches
        if (osDarkSchemePreferred === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    } else {
        const savedDarkMode = JSON.parse(storage)
        if(savedDarkMode === true) {
            document.getElementsByTagName("html")[0].classList.add("theme-dark")
        }
    }
    </script>
<script type="text/javascript" src="https://unpkg.com/kotlin-playground@1/dist/playground.min.js" async="async"></script>
<script type="text/javascript" src="scripts/sourceset_dependencies.js" async="async"></script>
<link href="styles/style.css" rel="Stylesheet">
<link href="styles/main.css" rel="Stylesheet">
<link href="styles/prism.css" rel="Stylesheet">
<link href="styles/logo-styles.css" rel="Stylesheet">
<link href="styles/font-jb-sans-auto.css" rel="Stylesheet">
<script type="text/javascript" src="scripts/clipboard.js" async="async"></script>
<script type="text/javascript" src="scripts/navigation-loader.js" async="async"></script>
<script type="text/javascript" src="scripts/platform-content-handler.js" async="async"></script>
<script type="text/javascript" src="scripts/main.js" defer="defer"></script>
<script type="text/javascript" src="scripts/prism.js" async="async"></script>
<script type="text/javascript" src="scripts/symbol-parameters-wrapper_deferred.js" defer="defer"></script>
</head>
<body>
    <div class="root">
<nav class="navigation" id="navigation-wrapper">
    <div class="navigation--inner">
        <div class="navigation-title">
            <button class="menu-toggle" id="menu-toggle" type="button">toggle menu</button>
            <div class="library-name">
                    <a class="library-name--link" href="index.html">
                            R3HandyEngine
                    </a>
            </div>
            <div class="library-version">
            </div>
        </div>
        <div class="filter-section" id="filter-section">
                <button class="platform-tag platform-selector jvm-like" data-active="" data-filter=":R3HandyEngine:dokkaHtml/release">androidJvm</button>
        </div>
    </div>
    <div class="navigation-controls">
        <button class="navigation-controls--btn navigation-controls--theme" id="theme-toggle-button" type="button">switch theme</button>
        <div class="navigation-controls--btn navigation-controls--search" id="searchBar" role="button">search in API</div>
    </div>
</nav>
        <div id="container">
            <div class="sidebar" id="leftColumn">
                <div class="sidebar--inner" id="sideMenu"></div>
            </div>
            <div id="main">
<div class="main-content" id="content" pageIds="R3HandyEngine::////PointingToDeclaration//858693387">
  <div class="breadcrumbs"></div>
  <div class="cover ">
    <h1 class="cover"><span>R3Handy</span><wbr></wbr><span><span>Engine</span></span></h1>
    <div class="platform-hinted UnderCoverText" data-platform-hinted="data-platform-hinted"><div class="content sourceset-dependent-content" data-active="" data-togglable=":R3HandyEngine:dokkaHtml/release"><p class="paragraph">「R3HandyEngine」AARライブラリは、AndroidアプリケーションでRFIDリーダー機能を簡単に統合し使用できるようにするためのコンポーネントです。</p><p class="paragraph">このライブラリを使用することで、開発者はRFIDタグの読み取り、管理を行うための一連のAPIを利用できます。</p><p class="paragraph">さらに、複数のリーダータイプとの互換性があり、アプリケーションに柔軟性を提供します。</p><ul><li><p class="paragraph">主な特徴</p></li><ul><li><p class="paragraph">多様なリーダー対応: GenericReaderは、市場にある様々なRFIDリーダーモデルに対応しており、一貫したAPIを通じて異なるデバイスとの接続を抽象化します。</p></li><li><p class="paragraph">簡易なAPI: ライブラリはシンプルで直感的なAPIを提供し、開発者が容易にRFID機能をアプリケーションに組み込めるよう設計されています。</p></li><li><p class="paragraph">カスタマイズ可能:       GenericReaderは設定が柔軟で、アプリケーションの特定のニーズに合わせてリーダーの設定を調整することが可能です。</p></li></ul><li><p class="paragraph">対応するRFIDリーダーモデル</p></li><ul><li><p class="paragraph">Bluebird RFR900/RFR901</p></li><li><p class="paragraph">Denso wave SP1</p></li><li><p class="paragraph">Keyence DX_RH1</p></li></ul></ul><h2 class="">Get Started</h2><h3 class="">ステップ 1: AARファイルのインポート</h3><p class="paragraph">(1) プロジェクトにAARファイルを追加</p><p class="paragraph">AARファイルをプロジェクトの libs フォルダにコピーします。</p><p class="paragraph">(2)  build.gradle (Module: app)の編集</p><p class="paragraph">libs フォルダにAARファイルを追加した後、app モジュールの build.gradle ファイルを開いて、以下の依存関係を追加します。</p><div class="sample-container"><pre><code class="block lang-gradle" theme="idea">dependencies {<br>implementation fileTree(dir: 'libs', include: ['*.aar'])<br>// 他の依存関係<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(3)  プロジェクトの同期</p><p class="paragraph">Gradleファイルを編集した後、Android Studioのツールバーから「Sync Project with Gradle Files」ボタンをクリックして、変更をプロジェクトに適用します。</p><h3 class="">ステップ 2: RFIDリーダーの使用</h3><p class="paragraph">AARライブラリが提供する GenericReader クラスを使用して、RFIDリーダーとの接続やタグの読取を行います。</p><p class="paragraph">(1)  リーダーのインスタンス生成 RFIDリーダーのインスタンスを作成する方法は以下の二つがあります。 直接指定によるリーダーインスタンスの生成</p><ul><li><p class="paragraph">リーダータイプを直接指定して、GenericReader クラスの getReader メソッドを使用する方法です。   この方法は、事前にリーダータイプが決定している場合に適しています。</p></li></ul><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">    val readerType = ReaderType.DX_RH1 // リーダータイプを直接指定<br>    val reader = GenericReader.getReader(readerType, applicationContext, this)</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><ul><li><p class="paragraph">GenericReaderHelperを利用したリーダータイプの動的選択   アプリケーションの設定に保存されたリーダータイプが存在する場合、そのタイプが直接使用されます。   初期起動時など、保存されたリーダータイプがない場合には、ユーザーにリーダータイプを選択するためのダイアログが表示されます。   この方法は、リーダータイプを動的に決定する必要がある場合に適しています。</p></li></ul><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">    val readerHelper = GenericReaderHelper(this, this)<br>    val readerType = readerHelper.loadReaderType()<br>    if (readerType != null) {//リーダータイプが存在する場合<br>        val reader = GenericReader.getReader(readerType, applicationContext, this) <br>    }</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">ユーザーがリーダータイプを選択し、その選択が完了すると、GenericReaderHelperListener.onReaderTypeChanged メソッドが呼び出されます。</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">    override fun onReaderTypeChanged(readerType: Enum.ReaderType) {<br>        P3FinderSdk.setReaderType(readerType.value())<br>        mReader = GenericReader.getReader(readerType, applicationContext, this)<br>        mReader?.connect()<br>    }</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(2)  リーダと接続します。</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">    reader.connect()</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(3)  接続した後、読取パラメータを設定します。</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">    reader.setPower(30f)  // 電力レベルを設定<br>    reader.channel = intArrayOf(0,1) //周波数Indexを設定</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(4)  読取開始</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">    reader.setPower(30f)  // 電力レベルを設定<br>    reader.channel = intArrayOf(0,1) //周波数の設定<br>    reader.startInventory()  // 読取開始します。</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(5)  イベントリスナーの実装 RFIDイベントを処理するためのリスナーを実装します。</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">val listener = object : GenericReaderListener {<br>    override fun onTagRead(tag: TagData) {<br>        // タグ読取時の処理<br>    }<br><br>    override fun onReaderStatusChanged(status: ReaderStatus) {<br>        // リーダーの状態変更時の処理<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(6)  読取停止</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">reader.stopInventory()  // 読取電波を停止します。</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><p class="paragraph">(7)  リーダとの接続を切断します。</p><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">reader.disconnect()</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div><h2 class="">Sample</h2><div class="sample-container"><pre><code class="block lang-kotlin" theme="idea">package com.rflocus.p3finderSample<br><br>import android.os.Bundle<br>import android.os.PersistableBundle<br>import android.view.Menu<br>import androidx.appcompat.app.AppCompatActivity<br>import com.rflocus.rfid.*<br>import com.rflocus.rfid.Enum<br><br>/**<br> * RFIDリーダーの操作を管理するためのAndroid Activityクラスです。<br> * GenericReaderListenerおよびGenericReaderHelper.GenericReaderHelperListenerインターフェイスを実装しています。<br> */<br>open class RfidActivity : AppCompatActivity(), GenericReaderListener, GenericReaderHelper.GenericReaderHelperListener {<br><br>    companion object {<br>        // GenericReaderのインスタンスを保持する静的変数です。<br>        var mReader: GenericReader? = null<br>    }<br>    <br>    override fun onCreate(savedInstanceState: Bundle?) {<br>        super.onCreate(savedInstanceState)<br>        // GenericReaderHelperを利用してリーダータイプをロードします。<br>        val readerHelper = GenericReaderHelper(this, this)<br>        val readerType = readerHelper.loadReaderType()<br>        // リーダーを取得し、接続を試みます。<br>        mReader = GenericReader.getReader(readerType, applicationContext, this)<br>        mReader?.connect()<br>    }<br><br>    // リーダータイプが変更されたときに呼ばれるメソッドです。<br>    override fun onReaderTypeChanged(readerType: Enum.ReaderType) {<br>        // 新しいリーダータイプに基づいてリーダーを取得し、接続します。<br>        mReader = GenericReader.getReader(readerType, applicationContext, this)<br>        mReader?.connect()<br>    }<br><br><br>    override fun onDestroy() {<br>        // リーダーの接続を切断します。<br>        mReader?.disconnect()<br>        super.onDestroy()<br>    }<br><br>    // タグデータが読取された際に呼ばれるメソッドです。<br>    override fun reportTag(tagData: TagData) {<br>        // タグデータの処理を行います。<br>    }<br><br>    // 単一のタグデータが読取された際に呼ばれるメソッドです。<br>    override fun reportOneTag(tagData: TagData) {<br>        // 単一のタグデータの処理を行います。<br>    }<br><br>    // リーダーステータスが報告された際に呼ばれるメソッドです。<br>    override fun reportReaderStatus(status: Enum.ReaderStatus) {<br>        if (status == Enum.ReaderStatus.connected) {<br>            // リーダーが接続された際の処理を行います。<br>            mReader?.let {<br>                it.power = 20.5f<br>                it.channel = intArrayOf(0, 1)<br>            }<br>        }<br>    }<br><br>    // コマンド実行結果が報告された際に呼ばれるメソッドです。<br>    override fun reportCommand(cmd: Enum.ReaderCommand, result: Boolean, detail: String?) {<br>        if (cmd == Enum.ReaderCommand.startInventory &amp;&amp; result) {<br>            // 読取開始コマンドが成功した場合の処理を行います。<br>        } else if (cmd == Enum.ReaderCommand.stopInventory &amp;&amp; result) {<br>            // 読取停止コマンドが成功した場合の処理を行います。<br>        }<br>    }<br><br>    // トリガーが押された際に報告されるメソッドです。<br>    override fun reportTrigger(pressed: Boolean) {<br>        if(pressed){//トリガーが押された場合<br>            //読取を開始します。<br>            mReader?.startInventory()<br>        }else{//トリガーが離された場合<br>            //読取を終了します。<br>            mReader?.stopInventory()<br>        }<br>    }<br><br>    // バーコードが報告された際に呼ばれるメソッドです。<br>    override fun reportBarcode(barcode: String) {<br>        // バーコードデータの処理を行います。<br>    }<br><br>    // バッテリー状態が変更された際に呼ばれるメソッドです。<br>    override fun reportBatteryStateChanged(status: Int) {<br>        // バッテリー状態の変更に応じた処理を行います。<br>    }<br>}</code></pre><span class="top-right-position"><span class="copy-icon"></span><div class="copy-popup-wrapper popup-to-left"><span class="copy-popup-icon"></span><span>Content copied to clipboard</span></div></span></div></div></div>
  </div>
  <h2 class="">Packages</h2>
  <div class="table"><a data-name="1696870850%2FPackages%2F858693387" anchor-label="com.rflocus.rfid" id="1696870850%2FPackages%2F858693387" data-filterable-set=":R3HandyEngine:dokkaHtml/release"></a>
    <div class="table-row" data-filterable-current=":R3HandyEngine:dokkaHtml/release" data-filterable-set=":R3HandyEngine:dokkaHtml/release">
      <div>
        <div class="main-subrow ">
          <div class=""><span class="inline-flex">
              <div><a href="-r3-handy-engine/com.rflocus.rfid/index.html">com.rflocus.rfid</a></div>
<span class="anchor-wrapper"><span class="anchor-icon" pointing-to="1696870850%2FPackages%2F858693387"></span>
                <div class="copy-popup-wrapper "><span class="copy-popup-icon"></span><span>Link copied to clipboard</span></div>
              </span></span></div>
          <div class="pull-right">
            <div class="platform-tags no-gutters">
              <div class="platform-tag jvm-like">androidJvm</div>
            </div>
          </div>
        </div>
        <div></div>
      </div>
    </div>
  </div>
</div>
      <div class="footer">
        <span class="go-to-top-icon"><a href="#content" id="go-to-top-link"></a></span><span>© 2024 Copyright</span><span
                class="pull-right"><span>Generated by </span><a
                href="https://github.com/Kotlin/dokka"><span>dokka</span><span class="padded-icon"></span></a></span>
      </div>
            </div>
        </div>
    </div>
</body>
</html>
